{% extends "patient/base.html" %}
{% block title %}Compose Email - Northern Health Innovations{% endblock %}
{% block content %}
<div class="flex justify-between items-center mb-6">
  <h2 class="text-xl font-bold text-gray-800">Compose New Email</h2>
  <a href="{% url 'patient:patient_email' %}" class="text-[#004d40] hover:text-[#00332e] py-2 px-4 rounded-lg flex items-center">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 15l-3-3m0 0l3-3m-3 3h8M3 12a9 9 0 1118 0 9 9 0 01-18 0z" />
    </svg>
    Back to Email
  </a>
</div>

<div class="bg-white p-6 rounded-xl shadow mb-8">
  <form method="post" class="space-y-6">
    {% csrf_token %}
    
    {% if form.non_field_errors %}
    <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4" role="alert">
      {% for error in form.non_field_errors %}
        <p>{{ error }}</p>
      {% endfor %}
    </div>
    {% endif %}
    
    <!-- Recipient field -->
    <div>
      <label for="recipient_type" class="block text-sm font-medium text-gray-700 mb-1">Send To:</label>
      <select id="recipient_type" name="recipient_type" class="block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-[#004d40] focus:border-[#004d40] sm:text-sm">
        {% for value, label in recipient_choices %}
          <option value="{{ value }}">{{ label }}</option>
        {% endfor %}
      </select>
    </div>
    
    <!-- Subject field -->
    <div>
      <label for="subject" class="block text-sm font-medium text-gray-700 mb-1">Subject:</label>
      <input type="text" id="subject" name="subject" class="block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-[#004d40] focus:border-[#004d40] sm:text-sm" placeholder="Enter subject">
    </div>
    
    <!-- Message content field -->
    <div>
      <label for="content" class="block text-sm font-medium text-gray-700 mb-1">Message:</label>
      <textarea id="content" name="content" rows="8" class="block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-[#004d40] focus:border-[#004d40] sm:text-sm" placeholder="Type your message here..."></textarea>
    </div>
    
    <!-- Submit button -->
    <div class="flex justify-end">
      <button type="submit" class="bg-[#004d40] hover:bg-[#00332e] text-white py-2 px-4 rounded-lg flex items-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
        </svg>
        Send Email
      </button>
    </div>
  </form>
</div>

<!-- Email tips -->
<div class="bg-white p-6 rounded-xl shadow">
  <h3 class="text-lg font-semibold text-[#004d40] mb-4">Tips for Secure Communication</h3>
  <ul class="space-y-2 text-gray-600 list-disc list-inside">
    <li>Keep your communications brief and focused on your healthcare needs.</li>
    <li>Include your patient ID or appointment date when asking about specific services.</li>
    <li>Response time is typically 1-2 business days.</li>
    <li>For urgent matters, please call the clinic directly.</li>
    <li>All communications are encrypted and become part of your medical record.</li>
  </ul>
</div>
{% endblock %}
