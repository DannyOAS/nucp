{% extends "base.html" %}

{% block title %}Provider Registration - Northern Health Innovations{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-12 max-w-6xl">

    <!-- Registration Header -->
    <div class="text-center mb-8">
        <h1 class="text-3xl font-bold text-[#004d40]">Healthcare Provider Registration</h1>
        <p class="mt-2 text-gray-600 max-w-2xl mx-auto">
            Please complete this registration form to join our healthcare provider network.
        </p>
    </div>

    <!-- Progress Indicator -->
    <div class="max-w-4xl mx-auto mb-8">
        <div class="flex justify-between">
            <span class="text-[#004d40] font-medium">Personal Info</span>
            <span class="text-[#004d40] font-medium">Professional Info</span>
            <span class="text-[#004d40] font-medium">Practice Details</span>
            <span class="text-[#004d40] font-medium">Consent</span>
        </div>
        <div class="mt-2 h-2 bg-gray-200 rounded-full overflow-hidden">
            <div class="h-full bg-[#004d40] rounded-full" style="width: 0%" id="progress-bar"></div>
        </div>
    </div>

    <!-- Success Message -->
    {% if messages %}
        <div class="mb-6 flex justify-center">
            {% for message in messages %}
                <div id="success-message" class="relative w-full max-w-3xl px-6 py-4 rounded-lg shadow-md text-center font-semibold flex items-center justify-center"
                     style="background-color: #004d40; color: white; border: 1px solid #00332e; transition: opacity 0.5s ease-in-out;">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                    </svg>
                    {{ message }}
                </div>
            {% endfor %}
        </div>
    {% endif %}

    <!-- Registration Form in Cards -->
    <form method="POST" class="max-w-4xl mx-auto" id="registration-form">
        {% csrf_token %}

        <!-- 1. Personal Information Section -->
        <div class="bg-white rounded-xl shadow-md overflow-hidden mb-8" id="section-1">
            <div class="bg-[#004d40] px-6 py-4 flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                </svg>
                <h2 class="text-xl font-bold text-white">Personal Information</h2>
            </div>
            
            <div class="p-6 bg-gray-50">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="space-y-2">
                        <label class="block text-gray-700 font-semibold">First Name</label>
                        {{ form.first_name }}
                    </div>

                    <div class="space-y-2">
                        <label class="block text-gray-700 font-semibold">Last Name</label>
                        {{ form.last_name }}
                    </div>

                    <div class="space-y-2">
                        <label class="block text-gray-700 font-semibold">Email</label>
                        {{ form.email }}
                    </div>

                    <div class="space-y-2">
                        <label class="block text-gray-700 font-semibold">Phone</label>
                        {{ form.phone }}
                    </div>

                    <div class="space-y-2 md:col-span-2">
                        <label class="block text-gray-700 font-semibold">Address</label>
                        {{ form.address }}
                    </div>
                </div>
                
                <div class="mt-6 flex justify-end">
                    <button type="button" class="bg-[#004d40] text-white px-6 py-2 rounded-lg hover:bg-[#00332e] transition-all duration-200" onclick="nextSection(1)">
                        Next
                    </button>
                </div>
            </div>
        </div>

        <!-- 2. Professional Information Section -->
        <div class="bg-white rounded-xl shadow-md overflow-hidden mb-8 hidden" id="section-2">
            <div class="bg-[#004d40] px-6 py-4 flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                </svg>
                <h2 class="text-xl font-bold text-white">Professional Information</h2>
            </div>
            
            <div class="p-6 bg-gray-50">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="space-y-2">
                        <label class="block text-gray-700 font-semibold">Medical Specialty</label>
                        {{ form.specialty }}
                        <p class="text-gray-500 text-sm mt-1">Primary area of practice</p>
                    </div>

                    <div class="space-y-2">
                        <label class="block text-gray-700 font-semibold">License Number</label>
                        {{ form.license_number }}
                        <p class="text-gray-500 text-sm mt-1">Your professional license/registration number</p>
                    </div>

                    <div class="space-y-2 md:col-span-2">
                        <label class="block text-gray-700 font-semibold">Professional Bio</label>
                        {{ form.bio }}
                        <p class="text-gray-500 text-sm mt-1">Brief description of your professional background and expertise</p>
                    </div>
                </div>
                
                <div class="mt-6 flex justify-between">
                    <button type="button" class="border border-[#004d40] text-[#004d40] px-6 py-2 rounded-lg hover:bg-gray-100 transition-all duration-200" onclick="prevSection(2)">
                        Previous
                    </button>
                    <button type="button" class="bg-[#004d40] text-white px-6 py-2 rounded-lg hover:bg-[#00332e] transition-all duration-200" onclick="nextSection(2)">
                        Next
                    </button>
                </div>
            </div>
        </div>

        <!-- 3. Practice Details Section -->
        <div class="bg-white rounded-xl shadow-md overflow-hidden mb-8 hidden" id="section-3">
            <div class="bg-[#004d40] px-6 py-4 flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                </svg>
                <h2 class="text-xl font-bold text-white">Practice Details</h2>
            </div>
            
            <div class="p-6 bg-gray-50">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="space-y-2">
                        <label class="block text-gray-700 font-semibold">Practice Name</label>
                        <input type="text" name="practice_name" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="Practice Name">
                    </div>

                    <div class="space-y-2">
                        <label class="block text-gray-700 font-semibold">Practice Phone</label>
                        <input type="text" name="practice_phone" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="Practice Phone">
                    </div>

                    <div class="space-y-2 md:col-span-2">
                        <label class="block text-gray-700 font-semibold">Practice Address</label>
                        <textarea name="practice_address" rows="3" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="Practice Address"></textarea>
                    </div>

                    <div class="space-y-2">
                        <label class="block text-gray-700 font-semibold">Available for Virtual Care</label>
                        <select name="virtual_care_availability" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                            <option value="yes">Yes</option>
                            <option value="no">No</option>
                            <option value="limited">Limited Availability</option>
                        </select>
                    </div>

                    <div class="space-y-2">
                        <label class="block text-gray-700 font-semibold">Languages Spoken</label>
                        <input type="text" name="languages" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="e.g., English, French, Spanish">
                    </div>
                </div>
                
                <div class="mt-6 flex justify-between">
                    <button type="button" class="border border-[#004d40] text-[#004d40] px-6 py-2 rounded-lg hover:bg-gray-100 transition-all duration-200" onclick="prevSection(3)">
                        Previous
                    </button>
                    <button type="button" class="bg-[#004d40] text-white px-6 py-2 rounded-lg hover:bg-[#00332e] transition-all duration-200" onclick="nextSection(3)">
                        Next
                    </button>
                </div>
            </div>
        </div>

        <!-- 4. Consent Section -->
        <div class="bg-white rounded-xl shadow-md overflow-hidden mb-8 hidden" id="section-4">
            <div class="bg-[#004d40] px-6 py-4 flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <h2 class="text-xl font-bold text-white">Consent & Agreement</h2>
            </div>
            
            <div class="p-6 bg-gray-50">
                <div class="space-y-6">
                    <div class="p-4 bg-white rounded-lg border border-gray-200">
                        <h3 class="font-semibold text-[#004d40] mb-2">Terms of Service</h3>
                        <p class="text-gray-600 mb-4 text-sm">
                            By registering as a healthcare provider on the Northern Health Innovations platform, you agree to abide by our terms of service, which include maintaining the confidentiality of patient information, responding to patient inquiries in a timely manner, and adhering to professional standards of care.
                        </p>
                        <div class="flex items-center space-x-2">
                            <input type="checkbox" name="terms_consent" id="terms_consent" class="h-4 w-4 text-[#004d40] border-gray-300 rounded focus:ring-[#004d40]" required>
                            <label for="terms_consent" class="text-gray-700">I agree to the Terms of Service</label>
                        </div>
                    </div>

                    <div class="p-4 bg-white rounded-lg border border-gray-200">
                        <h3 class="font-semibold text-[#004d40] mb-2">Data Usage Consent</h3>
                        <p class="text-gray-600 mb-4 text-sm">
                            I consent to the collection and storage of my professional information for the purpose of providing healthcare services through the Northern Health Innovations platform. I understand that my profile information will be visible to patients seeking care.
                        </p>
                        <div class="flex items-center space-x-2">
                            {{ form.data_consent }}
                            <label for="id_data_consent" class="text-gray-700">I consent to the use of my data as described</label>
                        </div>
                    </div>

                    <div class="p-4 bg-white rounded-lg border border-gray-200">
                        <h3 class="font-semibold text-[#004d40] mb-2">Credentials Verification</h3>
                        <p class="text-gray-600 mb-4 text-sm">
                            I understand that Northern Health Innovations will verify my professional credentials, including license status and specialty certification, before my account is fully activated. I authorize Northern Health Innovations to contact relevant licensing and certification bodies for this purpose.
                        </p>
                        <div class="flex items-center space-x-2">
                            <input type="checkbox" name="verification_consent" id="verification_consent" class="h-4 w-4 text-[#004d40] border-gray-300 rounded focus:ring-[#004d40]" required>
                            <label for="verification_consent" class="text-gray-700">I authorize verification of my credentials</label>
                        </div>
                    </div>
                </div>
                
                <div class="mt-6 flex justify-between">
                    <button type="button" class="border border-[#004d40] text-[#004d40] px-6 py-2 rounded-lg hover:bg-gray-100 transition-all duration-200" onclick="prevSection(4)">
                        Previous
                    </button>
                    <button type="submit" class="bg-[#004d40] text-white px-6 py-2 rounded-lg hover:bg-[#00332e] transition-all duration-200">
                        Submit Registration
                    </button>
                </div>
            </div>
        </div>
    </form>
</div>

<script>
    // Auto-hide Success Message after 5 seconds
    setTimeout(function() {
        let successMessage = document.getElementById('success-message');
        if (successMessage) {
            successMessage.style.opacity = '0';
            setTimeout(() => successMessage.style.display = 'none', 500);
        }
    }, 5000);

    // Navigation between form sections
    const sections = 4;
    let currentSection = 1;
    
    function updateProgressBar() {
        const progressBar = document.getElementById('progress-bar');
        const progress = ((currentSection - 1) / (sections - 1)) * 100;
        progressBar.style.width = `${progress}%`;
    }
    
    function showSection(sectionNumber) {
        for (let i = 1; i <= sections; i++) {
            const section = document.getElementById(`section-${i}`);
            if (i === sectionNumber) {
                section.classList.remove('hidden');
            } else {
                section.classList.add('hidden');
            }
        }
        updateProgressBar();
    }
    
    function nextSection(current) {
        if (current < sections) {
            currentSection = current + 1;
            showSection(currentSection);
            window.scrollTo(0, 0);
        }
    }
    
    function prevSection(current) {
        if (current > 1) {
            currentSection = current - 1;
            showSection(currentSection);
            window.scrollTo(0, 0);
        }
    }
    
    // Initialize
    updateProgressBar();
</script>
{% endblock %}
